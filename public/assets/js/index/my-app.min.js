var host="http://"+window.location.host,myApp=new Framework7({pushState:!0,modalTitle:"温馨提示",modalButtonOk:"确定",modalButtonCancel:"取消",smartSelectSearchbar:!0,smartSelectInPopup:!0,cache:!1,cacheIgnore:["/Public/Home/my/text/data.json"]}),$$=Dom7,mainView=myApp.addView(".view-main",{dynamicNavbar:!0});function upload3(col,formid,el){var form=new FormData(document.getElementById(formid));$$.post(col,form,function(d){if(0===d.code)myApp.alert(d.msg);else{var fromuser=JSON.parse($$("#from").html()),touser=JSON.parse($$("#to").html()),myMessages=myApp.messages(".messages");da={},da.fromUser=fromuser.id,da.toUser=touser.id,da.msg='<img src="'+d.data.url+'" alt="img">',da.type="msg",ws.send(JSON.stringify(da)),myMessages.addMessage({text:'<img src="'+d.data.url+'" alt="img">',type:"sent",avatar:fromuser.img})}},"json")}function yzm(mobile,event,type){function yzmButton(){var yzm=$$(".yzm");yzm.attr("disabled","disabled");var time=60,set=setInterval(function(){yzm.val("("+--time+")秒后重新获取")},1e3);setTimeout(function(){yzm.removeAttr("disabled").val("重新获取验证码"),clearInterval(set)},6e4)}$$.ajax({url:"/api/sms/send",type:"post",data:{mobile:mobile,event:event,type:type},success:function(data){var data;"发送成功"==(data=JSON.parse(data)).msg?(myApp.alert(data.msg),yzmButton()):myApp.alert(data.msg)},error:function(err){}})}function loginout(mobile,event,type){myApp.confirm("您确定要退出吗？",function(){$$.ajax({url:"/api/user/logout",data:{event:"logout"},success:function(data){var data=JSON.parse(data);MY.delCookie("tcgg"),MY.delCookie("address"),mainView.router.load({url:data.url,pushState:!0})}})})}function hongbao(){$$(".box-shadow").css("display","block"),$$(".hongbaoChai").css("display","block")}function hongbaoChai(){$$(".hongbaoChai").css("display","none"),$$.ajax({url:"/api/index/getIsGrabbed",type:"post",dataType:"json",success:function(data){"1"==data.data.isGrabbed?myApp.confirm("是否消耗3枚币进行抢红包，一天有三次机会",function(){MY.ajax("/api/index/getRedpackage")}):MY.ajax("/api/index/getRedpackage")}}),$$(".box-shadow").css("display","none")}function closeQiandao(){$$(".hongbaoShow").css("display","none"),$$(".box-shadow").css("display","none")}function c1(){var r=new FileReader;f=document.getElementById("fileone").files[0],r.readAsDataURL(f),r.onload=function(e){document.getElementById("show01").src=this.result}}function c2(){var r=new FileReader;f=document.getElementById("filetwo").files[0],r.readAsDataURL(f),r.onload=function(e){document.getElementById("show02").src=this.result}}myApp.onPageInit("success",function(page){setTimeout(function(){window.location.href="/"},3e3)}),myApp.onPageInit("scancode",function(page){function startRecognize(){try{var filter,styles={frameColor:"#29E52C",scanbarColor:"#29E52C",background:""};scan=new plus.barcode.Barcode("bcid",void 0,styles),scan.onmarked=onmarked,scan.onerror=onerror,scan.start();var flag=!1}catch(e){alert("出现错误啦:\n"+e)}}function onerror(e){alert(e)}function onmarked(type,result){var text="";switch(type){case plus.barcode.QR:text="QR: ";break;case plus.barcode.EAN13:text="EAN13: ";break;case plus.barcode.EAN8:text="EAN8: "}scan.close(),window.location.href=result.slice(7)}scan=null,mui.plusReady(function(){mui.init(),startRecognize()})}),myApp.onPageBeforeRemove("scancode",function(){scan.close()}),myApp.onPageInit("realName",function(page){mui.plusReady(function(){mui.init()})}),myApp.onPageInit("chart",function(page){var fromuser=JSON.parse($$("#from").html()),touser=JSON.parse($$("#to").html());ws=new WebSocket("ws://47.52.250.48:2346"),ws.onopen=function(){ws.send('{"fromUser":'+fromuser.id+',"toUser":'+touser.id+',"type":"bind"}')};var conversationStarted=!1,answerTimeout,isFocused,myMessages=myApp.messages(".messages"),myMessagebar=myApp.messagebar(".messagebar");ws.onmessage=function(e){var re=JSON.parse(e.data);if("msgList"==re.type){var msgs=re.messageList;if(msgs.length>0)for(i=0;i<msgs.length;i++)msgs[i].from_user_id==fromuser.id?myMessages.addMessage({text:msgs[i].content,type:"sent",day:!conversationStarted&&msgs[i].send_time,avatar:fromuser.img}):(myMessages.addMessage({text:msgs[i].content,type:"received",day:!conversationStarted&&msgs[i].send_time,name:touser.username,avatar:touser.img}),"0"==re.state&&ws.send('{"msgid":'+msgs[i].id+',"type":"read"}'))}"msg"==re.type&&re.from_user_id==touser.id&&(myMessages.addMessage({text:re.content.toString(),type:"received",day:!conversationStarted&&re.send_time,name:touser.username,avatar:touser.img}),ws.send('{"msgid":'+re.msgid+',"type":"read"}'))},$$(".messagebar a.send-message").on("touchstart mousedown",function(){isFocused=document.activeElement&&document.activeElement===myMessagebar.textarea[0]}),$$(".messagebar a.send-message").on("click",function(e){isFocused&&(e.preventDefault(),myMessagebar.textarea[0].focus());var messageText=myMessagebar.value();0!==messageText.length&&(myMessagebar.clear(),da={},da.fromUser=fromuser.id,da.toUser=touser.id,da.msg=messageText.toString(),da.type="msg",ws.send(JSON.stringify(da)),myMessages.addMessage({text:messageText,type:"sent",day:!conversationStarted&&"今天",time:!conversationStarted&&(new Date).getHours()+":"+(new Date).getMinutes(),avatar:fromuser.img}),conversationStarted=!0)})}),myApp.onPageBeforeRemove("chart",function(){ws.close()}),myApp.onPageInit("login",function(page){gp(),clearInterval(window.interval)}),myApp.onPageInit("cart",function(page){}),myApp.onPageInit("hyrg",function(page){var djsBox;if($$(".paytypeList").on("click","li",function(){$$(this).addClass("active").siblings().removeClass("active");var paytype=$$(this).attr("data-paytype");$$("#paytype").val(paytype)}),"1"!==$$("#djsShow").val()){var dateReadableText="Upcoming date";$$(".site-config").attr("data-date-readable")&&""!=$$(".site-config").attr("data-date-readable")&&($$(".timeout-day").text(""),dateReadableText=$$(".site-config").attr("data-date-readable"),$$(".timeout-day").text(dateReadableText)),jQuery(".clock-countdown").downCount({date:$$(".site-config").attr("data-date"),offset:10},function(){var zerodayText="An upcoming date";$$(".site-config").attr("data-zeroday-text")&&""!=$$(".site-config").attr("data-zeroday-text")&&($$(".timeout-day").text(""),zerodayText=$$(".site-config").attr("data-zeroday-text")),$$(".timeout-day").text(zerodayText)}),jQuery("#second-knob").knob()}}),myApp.onPageInit("tradeindex",function(page){$$(".trade-tab ul li a").click(function(e){e.preventDefault(),$$(this).parent().addClass("active").siblings(".active").removeClass("active"),$$($$(this).attr("href")).addClass("active").siblings(".active").removeClass("active")});var loading=!1,lastIndex=1;$$(".infinite-scroll").on("infinite",function(){loading||(loading=!0,$$.get("/index.php/index/trade/getmore?page="+lastIndex,function(d){""!==d?($$("#salelist").append(d),lastIndex+=1,loading=!1):loading=!0}))})}),myApp.onPageInit("luckydraw",function(page){var turntable=$("#turntable"),playnum=parseInt($(".playnum").html()),isture=!1,clickfunc=function(){var data=[1,5,8];switch(data=data[Math.floor(Math.random()*data.length)]){case 1:rotateFunc(1,0,"谢谢参与!");break;case 5:rotateFunc(5,144,"谢谢参与!");break;case 8:rotateFunc(8,252,"恭喜您获得5枚源币!")}};$("#pointer").click(function(){isture||(isture=!0,playnum<1?(myApp.alert("没有次数了"),isture=!1):myApp.confirm("是否要消耗3个币转一次?","温馨提示",function(){playnum-=1,$$(".playnum").html(playnum),clickfunc()}))});var rotateFunc=function(awards,angle,text){isture=!0,turntable.stopRotate(),turntable.rotate({angle:0,duration:4e3,animateTo:angle+1440,callback:function(){isture=!1,$.ajax({url:"/Api/User/luckydraw",type:"POST",data:{awards:awards,ss:"sss"},success:function(data){myApp.alert(data.msg)}}),$$("#award").val(awards)}})}}),myApp.onPageInit("signin",function(page){MY.ajax("/api/user/daybao","")}),myApp.onPageInit("uploadgoods",function(){var lv1HTML='<div class="control-group lv1"><label class="control-label">规格名称</label><div class="controls"><input type="text" name="lv1" placeholder="规格名称"><button class="btn btn-primary add_lv2" type="button">添加参数</button><button class="btn btn-danger remove_lv1" type="button">删除规格</button></div><div class="controls lv2s"></div></div>',lv2HTML='<div style="margin-top: 5px;"><input type="text" name="lv2" placeholder="参数名称"><button class="btn btn-danger remove_lv2" type="button">删除参数</button></div>';function uploadTable(){var lv1Arr=jQuery('input[name="lv1"]');if(!lv1Arr||0==lv1Arr.length)return jQuery("#lv_table_con").hide(),void jQuery("#lv_table").html("");var tableHTML="";tableHTML+='<table class="table table-bordered">',tableHTML+="    <thead>",tableHTML+="        <tr>";for(var i=0;i<lv1Arr.length;i++)tableHTML+="<th>"+jQuery(lv1Arr[i]).val()+"</th>";tableHTML+='            <th width="80">价格</th>',tableHTML+="        </tr>",tableHTML+="    </thead>",tableHTML+="    <tbody>";for(var numsArr=new Array,idxArr=new Array,i=0;i<lv1Arr.length;i++)numsArr.push(jQuery(lv1Arr[i]).parents(".lv1").find('input[name="lv2"]').length),idxArr[i]=0;for(var len=1,rowsArr=new Array,i=0;i<numsArr.length;i++){len*=numsArr[i];for(var tmpnum=1,j=numsArr.length-1;j>i;j--)tmpnum*=numsArr[j];rowsArr.push(tmpnum)}for(var i=0;i<len;i++){tableHTML+='        <tr data-row="'+(i+1)+'">';for(var name="",j=0;j<lv1Arr.length;j++){var n=parseInt(i/rowsArr[j]);if(0==j);else if(j==lv1Arr.length-1)n=idxArr[j],idxArr[j]+1>=numsArr[j]?idxArr[j]=0:idxArr[j]++;else{var m;n=parseInt(i/rowsArr[j])%numsArr[j]}var text=jQuery(lv1Arr[j]).parents(".lv1").find('input[name="lv2"]').eq(n).val();j!=lv1Arr.length-1?name+=text+"_":name+=text,i%rowsArr[j]==0&&(tableHTML+='<td  rowspan="'+rowsArr[j]+'" data-rc="'+(i+1)+"_"+(j+1)+'">'+text+"</td>")}tableHTML+='<td width="80"><input type="text" name="spec_type['+name+']" /></td>',tableHTML+="</tr>"}tableHTML+="</tbody>",tableHTML+="</table>",jQuery("#lv_table_con").show(),jQuery("#lv_table").html(tableHTML)}jQuery("#add_lv1").on("click",function(){var last=jQuery(".control-group.lv1:last");last&&0!=last.length?last.after(lv1HTML):jQuery(this).parents(".control-group").eq(0).after(lv1HTML)}),jQuery(document).on("click",".remove_lv1",function(){confirm("确认删除该规格项吗？")&&(jQuery(this).parents(".lv1").remove(),uploadTable())}),jQuery(document).off("click",".add_lv2").on("click",".add_lv2",function(e){jQuery(this).parents(".lv1").find(".lv2s").append(lv2HTML)}),jQuery(document).off("click",".remove_lv2").on("click",".remove_lv2",function(e){confirm("确认删除该参数吗？")&&(jQuery(this).parent().remove(),uploadTable())}),jQuery(document).on("change","input[name='lv2']",function(){uploadTable()});var contentEditor=new Eleditor({el:"#contentEditor",upload:{server:"/api/shop/uploadimg",compress:!1,fileSizeLimit:2},mounted:function(){var _videoUploader=WebUploader.create({auto:!0,server:"/api/shop/uploadvideo",pick:$(".Eleditor-insertVideo"),duplicate:!0,resize:!1,accept:{title:"Images",extensions:"mp4",mimeTypes:"video/mp4"},fileVal:"video"})},changer:function(){$("#goods_content").val($("#contentEditor").html())},toolbars:["insertText","editText","insertImage","insertLink","insertHr","delete","undo","cancel"]})}),myApp.onPageInit("category",function(page){$$(".tabs li a").click(function(e){e.preventDefault(),$$(this).parent().siblings("li").children("a").removeClass("current"),$$(this).addClass("current");var proName=$$(this).attr("data-name");$$(".productList").find(".products").each(function(){$$(this).hasClass(proName)?$$(this).show():$$(this).hide()})})}),myApp.onPageInit("pay",function(page){$$("#payform").submit()}),myApp.onPageInit("charitablegiving",function(page){myApp.swiper(".swiper-vertical",{pagination:".swiper-vertical .swiper-pagination",spaceBetween:0,autoplay:3e3})}),myApp.onPageInit("goodsinfo",function(page){myApp.swiper(".swiper-vertical",{pagination:".swiper-vertical .swiper-pagination",spaceBetween:0,autoplay:!1})});var showtimes=0;myApp.onPageInit("main",function(){$("#citySelected").click(function(){console.log("city"),citypicker()}),$$(".popover").on("click",function(){myApp.closeModal(".popover")},!1),MY.getCookie("tcgg")||($$("#tcgg").css("display","block"),$$("#tcgg i").click(function(){$$("#tcgg").css("display","none")},!1),MY.setCookie("tcgg",1)),myApp.swiper(".swiper-vertical",{pagination:".swiper-vertical .swiper-pagination",spaceBetween:0,autoplay:3e3})}),myApp.onPageAfterAnimation("main",function(){if(MY.getCookie("address")){var address=MY.getCookie("address");$$(".cityname").text(address)}else{var geolocation;(new BMap.Geolocation).getCurrentPosition(function(r){this.getStatus()==BMAP_STATUS_SUCCESS&&(lat=r.point.lat,lng=r.point.lng,province=r.address.province,city=r.address.city,$$(".cityname").text(city),MY.setCookie("address",city))})}}),myApp.onPageInit("tradecenter",function(){myApp.swiper(".swiper-vertical",{pagination:".swiper-vertical .swiper-pagination",spaceBetween:0})}),myApp.onPageInit("shop",function(){myApp.swiper(".swiper-vertical",{pagination:".swiper-vertical .swiper-pagination",spaceBetween:0,autoplay:3e3})});var handlerEmbed=function(captchaObj){$("#embed-submit").click(function(e){var validate;captchaObj.getValidate()||($("#notice")[0].className="show",setTimeout(function(){$("#notice")[0].className="hide"},2e3),e.preventDefault())}),$$("#embed-captcha").html(""),captchaObj.appendTo("#embed-captcha")};function gp(){$.ajax({url:"/addons/geet/index/start",type:"get",dataType:"json",success:function(data){initGeetest({gt:data.gt,challenge:data.challenge,new_captcha:data.new_captcha,product:"embed",offline:!data.success},handlerEmbed)}})}function project3D(x,y,z,vars){var p,d;x-=vars.camX,y-=vars.camY-8,z-=vars.camZ,p=Math.atan2(x,z),d=Math.sqrt(x*x+z*z),x=Math.sin(p-vars.yaw)*d,z=Math.cos(p-vars.yaw)*d,p=Math.atan2(y,z),d=Math.sqrt(y*y+z*z),y=Math.sin(p-vars.pitch)*d;var rx1=-1e3,ry1=1,rx2=1e3,ry2=1,rx3=0,ry3=0,rx4=x,ry4=z=Math.cos(p-vars.pitch)*d,uc=2e3*(z-0)-0*(x-0),ua=(1*(x-0)- -1e3*(z-0))/uc,ub=2e3/uc;return z||(z=1e-9),ua>0&&ua<1&&ub>0&&ub<1?{x:vars.cx+(rx1+2e3*ua)*vars.scale,y:vars.cy+y/z*vars.scale,d:x*x+y*y+z*z}:{d:-1}}function elevation(x,y,z){var dist=Math.sqrt(x*x+y*y+z*z);return dist&&z/dist>=-1&&z/dist<=1?Math.acos(z/dist):1e-8}function rgb(col){col+=1e-6;var r=parseInt(16*(.5+.5*Math.sin(col))),g=parseInt(16*(.5+.5*Math.cos(col))),b=parseInt(16*(.5-.5*Math.sin(col)));return"#"+r.toString(16)+g.toString(16)+b.toString(16)}function interpolateColors(RGB1,RGB2,degree){var w2=degree,w1=1-w2;return[w1*RGB1[0]+w2*RGB2[0],w1*RGB1[1]+w2*RGB2[1],w1*RGB1[2]+w2*RGB2[2]]}function rgbArray(col){var r=parseInt(256*(.5+.5*Math.sin(col))),g,b;return col+=1e-6,[r,parseInt(256*(.5+.5*Math.cos(col))),parseInt(256*(.5-.5*Math.sin(col)))]}function colorString(arr){var r=parseInt(arr[0]),g=parseInt(arr[1]),b=parseInt(arr[2]);return"#"+("0"+r.toString(16)).slice(-2)+("0"+g.toString(16)).slice(-2)+("0"+b.toString(16)).slice(-2)}function process(vars){if(vars.points.length<vars.initParticles)for(var i=0;i<5;++i)spawnParticle(vars);var p,d,t,t;p=Math.atan2(vars.camX,vars.camZ),d=Math.sqrt(vars.camX*vars.camX+vars.camZ*vars.camZ),d-=Math.sin(vars.frameNo/80)/25,t=Math.cos(vars.frameNo/300)/165,vars.camX=Math.sin(p+t)*d,vars.camZ=Math.cos(p+t)*d,vars.camY=15*-Math.sin(vars.frameNo/220),vars.yaw=Math.PI+p+t,vars.pitch=elevation(vars.camX,vars.camZ,vars.camY)-Math.PI/2;for(var i=0;i<vars.points.length;++i)x=vars.points[i].x,y=vars.points[i].y,z=vars.points[i].z,t=.1/(1+(d=Math.sqrt(x*x+z*z)/1.0075)*d/5),p=Math.atan2(x,z)+t,vars.points[i].x=Math.sin(p)*d,vars.points[i].z=Math.cos(p)*d,vars.points[i].y+=vars.points[i].vy*t*(2*(Math.sqrt(vars.distributionRadius)-d)),(vars.points[i].y>vars.vortexHeight/2||d<.25)&&(vars.points.splice(i,1),spawnParticle(vars))}function drawFloor(vars){for(var x,y,z,d,point,a,i=-25;i<=25;i+=1)for(var j=-25;j<=25;j+=1)z=2*j,-1!=(point=project3D(x=2*i,(y=vars.floor)-(d=Math.sqrt(x*x+z*z))*d/85,z,vars)).d&&(size=1+15e3/(1+point.d),(a=.15-.15*Math.pow(d/50,4))>0&&(vars.ctx.fillStyle=colorString(interpolateColors(rgbArray(d/26-vars.frameNo/40),[0,128,32],.5+Math.sin(d/6-vars.frameNo/8)/2)),vars.ctx.globalAlpha=a,vars.ctx.fillRect(point.x-size/2,point.y-size/2,size,size)));vars.ctx.fillStyle="#82f";for(var i=-25;i<=25;i+=1)for(var j=-25;j<=25;j+=1)z=2*j,-1!=(point=project3D(x=2*i,(y=-vars.floor)+(d=Math.sqrt(x*x+z*z))*d/85,z,vars)).d&&(size=1+15e3/(1+point.d),(a=.15-.15*Math.pow(d/50,4))>0&&(vars.ctx.fillStyle=colorString(interpolateColors(rgbArray(-d/26-vars.frameNo/40),[32,0,128],.5+Math.sin(-d/6-vars.frameNo/8)/2)),vars.ctx.globalAlpha=a,vars.ctx.fillRect(point.x-size/2,point.y-size/2,size,size)))}function sortFunction(a,b){return b.dist-a.dist}function draw(vars){var point,x,y,z,a;vars.ctx.globalAlpha=.15,vars.ctx.fillStyle="#000",vars.ctx.fillRect(0,0,canvas.width,canvas.height),drawFloor(vars);for(var i=0;i<vars.points.length;++i)-1!=(point=project3D(x=vars.points[i].x,y=vars.points[i].y,z=vars.points[i].z,vars)).d&&(vars.points[i].dist=point.d,size=1+vars.points[i].radius/(1+point.d),d=Math.abs(vars.points[i].y),a=.8-.8*Math.pow(d/(vars.vortexHeight/2),1e3),vars.ctx.globalAlpha=a>=0&&a<=1?a:0,vars.ctx.fillStyle=rgb(vars.points[i].color),point.x>-1&&point.x<vars.canvas.width&&point.y>-1e3&&point.y<vars.canvas.height&&vars.ctx.fillRect(point.x-size/2,point.y-size/2,size,size));vars.points.sort(sortFunction)}function spawnParticle(vars){var p,ls;pt={},p=2*Math.PI*Math.random(),ls=Math.sqrt(Math.random()*vars.distributionRadius),pt.x=Math.sin(p)*ls,pt.y=-vars.vortexHeight/2,pt.vy=vars.initV/20+Math.random()*vars.initV,pt.z=Math.cos(p)*ls,pt.radius=200+800*Math.random(),pt.color=pt.radius/1e3+vars.frameNo/250,vars.points.push(pt)}myApp.onPageInit("*",function(){function pushHistory(){var state={title:"title",url:"#"};window.history.pushState(state,"title","#")}$$("form.ajax-submit").on("beforeSubmit",function(e){myApp.showIndicator()});var lock=0;$$("form.ajax-submit").on("submitted",function(e){if(myApp.hideIndicator(),0!=lock)return!1;lock=1;var data=JSON.parse(e.detail.data);data.msg?(lock=0,myApp.alert(data.msg,function(){""!==data.url&&mainView.router.load({url:data.url,pushState:!0}),321==data.data&&mainView.router.refreshPage(),789==data.data&&mainView.router.back(),123==data.data&&gp()})):""!==data.url&&(lock=0,mainView.router.load({url:data.url,pushState:!0}))}),$$("form.ajax-submit").on("submitError",function(e){myApp.alert("网络错误"),myApp.hideIndicator()})}),myApp.onPageInit("tradeindex",function(){MY.countTime(".untime","已用完"),MY.countTime1(".toutime",1),$$.getJSON(host+"/api/kline/index",function(d){var dd=d.data,dates=dd.time,data=dd.data,volumes=dd.volumes,kk=data.length-1;$$("#open").html(data[kk][1]),$$("#now").html(data[kk][2]),$$("#buyprice").val(data[kk][2]),$$("#saleprice").val(data[kk][2]),$$("#nowprice").html(data[kk][2]),kk>0?$$("#yestprice").html(data[kk-1][2]):$$("#yestprice").html(0),$$("#low").html(data[kk][3]),$$("#high").html(data[kk][4]);var nowprice=data[kk][2],myChart=echarts.init(document.getElementById("main-container")),upColor="#ec0000",upBorderColor="#8A0000",downColor="#00da3c",downBorderColor="#008F28",data0=splitData(data);function splitData(rawData){for(var categoryData=[],values=[],linedata=[],i=0;i<rawData.length;i++)categoryData.push(rawData[i].splice(0,1)[0]),values.push(rawData[i]),linedata.push(rawData[i][1]);return{categoryData:categoryData,values:values,linedata:linedata}}function calculateMA(dayCount){for(var result=[],i=0,len=data0.values.length;i<len;i++)if(i<dayCount)result.push("-");else{for(var sum=0,j=0;j<dayCount;j++)sum+=data0.values[i-j][1];result.push(sum/dayCount)}return result}option={title:{left:"10",text:"今日价格:$"+nowprice,textStyle:{fontSize:15,fontWeight:"normal",color:"#000"}},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{top:"10%",left:"10%",right:"7%",bottom:"25%"},xAxis:{type:"category",data:data0.categoryData,scale:!0,boundaryGap:!1,axisLine:{onZero:!1},splitLine:{show:!1},splitNumber:20,min:"dataMin",max:"dataMax"},yAxis:{scale:!0,splitArea:{show:!1}},splitLine:{show:!1,lineStyle:{color:["#ccc"],width:1,type:"solid"}},dataZoom:[{type:"inside",start:0,end:100},{show:!0,type:"slider",y:"82%",start:20,end:100}],series:[{name:"日线",type:"line",data:data0.linedata,smooth:!0,lineStyle:{normal:{opacity:.5}},itemStyle:{normal:{color:upColor,color0:"#00da3c",borderColor:"#8A0000",borderColor0:"#008F28"}}}]},myChart.setOption(option)})}),myApp.onPageBeforeRemove("tradeindex",function(){clearInterval(window.interval)}),myApp.attachInfiniteScroll(".scrolls");var swt=0;function frame(vars){if(1==swt)return!1;var vars;1==vars&&((vars={}).canvas=document.querySelector("canvas"),vars.ctx=vars.canvas.getContext("2d"),vars.canvas.width=document.body.clientWidth,vars.canvas.height=document.body.clientHeight,window.addEventListener("resize",function(){vars.canvas.width=document.body.clientWidth,vars.canvas.height=document.body.clientHeight,vars.cx=vars.canvas.width/2,vars.cy=vars.canvas.height/2},!0),vars.frameNo=0,vars.camX=0,vars.camY=0,vars.camZ=-14,vars.pitch=elevation(vars.camX,vars.camZ,vars.camY)-Math.PI/2,vars.yaw=0,vars.cx=vars.canvas.width/2,vars.cy=vars.canvas.height/2,vars.bounding=20,vars.scale=500,vars.floor=26.5,vars.points=[],vars.initParticles=700,vars.initV=.01,vars.distributionRadius=800,vars.vortexHeight=25);vars.frameNo++,requestAnimationFrame(function(){frame(vars)}),process(vars),draw(vars)}function splitDatavalue(rawData,type){var values=[];if(1===type)for(var i=0;i<rawData.length;i++)values.push(rawData[i].id);else for(var i=0;i<rawData.length;i++)values.push(rawData[i].name);return values}myApp.onPageBeforeRemove("myMill",function(){}),myApp.onPageBeforeAnimation("myMill",function(){var cj=new CircleJs}),myApp.onPageInit("skdetail",function(){$$("img").on("click",function(e){var myPhotoBrowser;myApp.photoBrowser({expositionHideCaptions:!0,photos:[e.target.currentSrc]}).open()})}),myApp.onPageAfterAnimation("coinexchange",function(){window.interval=setInterval(function(){mainView.router.refreshPage()},3e3)}),myApp.onPageAfterAnimation("coinexchange2",function(){clearInterval(window.interval)}),myApp.onPageAfterAnimation("news",function(){clearInterval(window.interval)}),myApp.onPageInit("schoolindex2",function(){var pickerDevice=myApp.picker({input:"#ks-picker-device",toolbarCloseText:"选择",formatValue:function(p,values,displayValues){return displayValues[0]},cols:[{textAlign:"left",values:splitDatavalue(JSON.parse($$("#record").html()),1),displayValues:splitDatavalue(JSON.parse($$("#record").html()),2)}],onClose:function(picker){console.log(picker.value[0])}}),pickerclasstype=myApp.picker({input:"#picker-classtype",toolbarCloseText:"选择",formatValue:function(p,values,displayValues){return displayValues[0]},cols:[{textAlign:"left",values:splitDatavalue(JSON.parse($$("#classtype").html()),1),displayValues:splitDatavalue(JSON.parse($$("#classtype").html()),2)}],onClose:function(picker){console.log(picker.value[0])}})});